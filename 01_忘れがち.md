# 忘れがちな設定

## Releaseビルド設定

> [ ] Visual Studio ホスティング プロセスを有効にする（O）

appname.vshost.exeの生成抑制

> ビルドの詳細設定 -> デバッグ情報 : none

pdbファイルの生成抑制

Dllのxmlはインテリセンス用でいらない

## フォルダ構成

exeから分離しても参照するには

app.config
```C#
<configuration>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.6" /></startup>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <probing privatePath="dll" />
```
      
## 例外

```C#
    public partial class App : Application
    {
        protected override void OnStartup(StartupEventArgs e)
        {
            AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
            base.OnStartup(e);

            var bootstrapper = new Bootstrapper();
            bootstrapper.Run();
        }

        private void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
        {
            Exception ex = (Exception)e.ExceptionObject;
            MessageBox.Show(ex.ToString(), "UnhandledException",
                      MessageBoxButton.OK, MessageBoxImage.Error);
        }

    }
```

## Args

```C#
    public partial class App : Application
    {
        public static string[] CommandLineArgs { get; private set; }
        protected override void OnStartup(StartupEventArgs e)
        {
            CommandLineArgs = e.Args;
            base.OnStartup(e);

            var bootstrapper = new Bootstrapper();
            bootstrapper.Run();
        }
    }
```


## リソースの登録

ビルドアクション : Resource

```C#
  var bitmap = new BitmapImage(new Uri("pack://application:,,,/logo.png", UriKind.Absolute));
  //var bitmap = new BitmapImage(new Uri("logo.png", UriKind.Relative));
  img = new WriteableBitmap(bitmap);
```
